{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h2 class="text-center mb-4">üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ username }}!</h2>
  <p class="lead text-center text-muted">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É:</p>

  <div class="row mt-4">
    {% set blocks = [
      {'icon': 'üí±', 'title': '–ö–æ—Ç–∏—Ä–æ–≤–∫–∏', 'desc': '–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏.', 'url': 'assets.asset_list'},
      {'icon': 'üíº', 'title': '–ü–æ—Ä—Ç—Ñ–µ–ª—å', 'desc': '–í–∞—à–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ –±–∞–ª–∞–Ω—Å.', 'url': 'portfolio.view_portfolio'},
      {'icon': 'üë§', 'title': '–ü—Ä–æ—Ñ–∏–ª—å', 'desc': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–∞.', 'url': 'profile.profile_view'}
    ] %}

    {% for block in blocks %}
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm h-100">
        <div class="card-body text-center">
          <h5 class="card-title">{{ block.icon }} {{ block.title }}</h5>
          <p class="card-text">{{ block.desc }}</p>
          <a href="{{ url_for(block.url) }}" class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏</a>
        </div>
      </div>
    </div>
    {% endfor %}

    {% if current_user.is_admin %}
    <div class="col-md-4 mb-4">
      <div class="card border-warning shadow-sm h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-warning">üõ† –ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å</h5>
          <p class="card-text">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ª–æ–≥–∞–º–∏.</p>
          <a href="{{ url_for('admin.admin_dashboard') }}" class="btn btn-warning">–ü–µ—Ä–µ–π—Ç–∏</a>
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  <div class="row mt-5">
    <div class="col-md-6">
      <div class="card border-info h-100">
        <div class="card-header bg-info text-white">üß† –ù–µ–π—Ä–æ‚Äë–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ç AI</div>
        <div class="card-body">
          {% if analysis %}
            <pre class="bg-light p-3 border rounded">{{ analysis }}</pre>
            <div class="text-end mt-2">
              <a href="{{ url_for('forecast.forecast_view') }}" class="btn btn-outline-info">üìä –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–æ–≥–Ω–æ–∑—É</a>
            </div>
          {% else %}
            <p class="text-muted">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card border-secondary h-100">
        <div class="card-header bg-secondary text-white">üìò –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞</div>
        <div class="card-body text-center">
          <p class="card-text">–û—Ç–∫—Ä–æ–π —Å–æ–≤–µ—Ç—ã –¥–ª—è —Å–ø–æ–∫–æ–π–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π.</p>
          <a href="{{ url_for('psychology.psychology_page') }}" class="btn btn-outline-secondary">üß† –ß–∏—Ç–∞—Ç—å —Å–æ–≤–µ—Ç—ã</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
